{% load static %}
<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–°–ø–∏—Å–æ–∫ –∫—ñ–º–Ω–∞—Ç</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #6366f1;
            --dark: #0f172a;
            --muted: #475569;
            --glass: rgba(255,255,255,0.78);
        }

        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            background:
                radial-gradient(circle at top left, #c7d2fe, transparent 40%),
                radial-gradient(circle at bottom right, #bbf7d0, transparent 40%),
                linear-gradient(135deg, #eef2ff, #f0fdf4);
            padding-top: 80px;
            transition: background .4s;
        }

        body.dark {
            background:
                radial-gradient(circle at top left, #1e1b4b, transparent 40%),
                radial-gradient(circle at bottom right, #064e3b, transparent 40%),
                linear-gradient(135deg, #020617, #020617);
        }

        /* Navbar */
        .navbar {
            background: rgba(15, 23, 42, 0.9) !important;
            backdrop-filter: blur(12px);
            box-shadow: 0 10px 30px rgba(0,0,0,.25);
        }

        .navbar-brand {
            font-weight: 700;
        }

        .nav-link:hover {
            color: #c7d2fe !important;
        }

        /* Page container */
        .container {
            max-width: 1100px;
            margin: 0 auto;
        }

        /* Heading */
        h2 {
            text-align: center;
            margin-bottom: 2rem;
            font-weight: 700;
            color: var(--dark);
        }

        body.dark h2 {
            color: #e5e7eb;
        }

        /* Filter form */
        .filter-card {
            background: var(--glass);
            backdrop-filter: blur(14px);
            border-radius: 28px;
            padding: 20px 30px;
            margin-bottom: 2rem;
            box-shadow: 0 30px 70px rgba(0,0,0,.15);
        }

        body.dark .filter-card {
            background: rgba(15,23,42,0.75);
        }

        .filter-card select,
        .filter-card button {
            border-radius: 14px;
        }

        .filter-card select {
            padding: 10px 14px;
            border: 1px solid #c7d2fe;
            background: rgba(255,255,255,0.15);
            color: var(--dark);
            transition: .3s;
        }

        body.dark .filter-card select {
            background: #020617;
            color: #e5e7eb;
            border-color: #4338ca;
        }

        .filter-card select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99,102,241,.25);
        }

        /* Room cards */
        .room-card {
            background: var(--glass);
            backdrop-filter: blur(14px);
            border-radius: 28px;
            padding: 20px;
            box-shadow: 0 25px 60px rgba(0,0,0,.15);
            transition: transform .3s;
        }

        .room-card:hover {
            transform: translateY(-5px);
        }

        body.dark .room-card {
            background: rgba(15,23,42,0.75);
            color: #e5e7eb;
        }

        .room-card h5 {
            font-weight: 700;
            color: var(--dark);
        }

        body.dark .room-card h5 {
            color: #e5e7eb;
        }

        .room-card p, .room-card li {
            color: var(--muted);
        }

        body.dark .room-card p, body.dark .room-card li {
            color: #cbd5f5;
        }

        .room-card ul {
            padding-left: 20px;
            margin-bottom: 0;
        }

        /* Buttons */
        .btn-primary {
            border-radius: 999px;
            background: linear-gradient(135deg, #6366f1, #4f46e5);
            border: none;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(79,70,229,.45);
        }

        /* Theme toggle */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            border-radius: 999px;
        }
    </style>
</head>
<body>

<!-- Theme toggle -->
<button id="themeToggle" class="btn btn-sm btn-outline-dark theme-toggle">üåô</button>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="{% url 'home' %}">–°–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è</a>
    <ul class="navbar-nav ms-auto align-items-center">
        {% if user.is_authenticated %}
            <li class="nav-item"><a class="nav-link" href="{% url 'booking' %}">–ó–∞–±—Ä–æ–Ω—é–≤–∞—Ç–∏</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'my_bookings' %}">–ú–æ—ó –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'rooms' %}">–ö—ñ–º–Ω–∞—Ç–∏</a></li>
            {% if user.is_staff %}
                <li class="nav-item"><a class="nav-link" href="/admin/">–ê–¥–º—ñ–Ω–∫–∞</a></li>
            {% endif %}
            <li class="nav-item">
                <form method="post" action="{% url 'logout' %}">
                    {% csrf_token %}
                    <button class="btn btn-link nav-link p-0">–í–∏–π—Ç–∏</button>
                </form>
            </li>
        {% else %}
            <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">–£–≤—ñ–π—Ç–∏</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'register' %}">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</a></li>
        {% endif %}
        <li class="nav-item ms-3">
            <button id="themeToggleNav" class="btn btn-sm btn-outline-light rounded-pill">üåô</button>
        </li>
    </ul>
  </div>
</nav>

<!-- Content -->
<div class="container mt-5">

    <h2>–°–ø–∏—Å–æ–∫ –∫—ñ–º–Ω–∞—Ç</h2>

    <div class="filter-card fade-up">
        <form method="get" class="row g-2 align-items-center">
            <div class="col-auto">
                <label for="type" class="col-form-label">–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –∑–∞ —Ç–∏–ø–æ–º:</label>
            </div>
            <div class="col-auto">
                <select name="type" id="type">
                    <option value="">–£—Å—ñ</option>
                    <option value="auditorium" {% if request.GET.type == "auditorium" %}selected{% endif %}>–ê—É–¥–∏—Ç–æ—Ä—ñ—è</option>
                    <option value="conference" {% if request.GET.type == "conference" %}selected{% endif %}>–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü-–∑–∞–ª</option>
                    <option value="lab" {% if request.GET.type == "lab" %}selected{% endif %}>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—è</option>
                    <option value="other" {% if request.GET.type == "other" %}selected{% endif %}>–Ü–Ω—à–µ</option>
                </select>
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-primary">–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏</button>
            </div>
        </form>
    </div>

    <div class="row row-cols-1 row-cols-md-2 g-4">
        {% for room in rooms %}
        <div class="col">
            <div class="room-card fade-up">
                <h5>{{ room.name }}</h5>
                <p><strong>–¢–∏–ø –∫—ñ–º–Ω–∞—Ç–∏:</strong>
                    {% if room.type == "auditorium" %}–ê—É–¥–∏—Ç–æ—Ä—ñ—è
                    {% elif room.type == "conference" %}–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü-–∑–∞–ª
                    {% elif room.type == "lab" %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—è
                    {% else %}–Ü–Ω—à–µ{% endif %}
                </p>
                <p><strong>–ú—ñ—Å—Ç–∫—ñ—Å—Ç—å:</strong> {{ room.capacity }} –æ—Å—ñ–±</p>
                <p><strong>–¶—ñ–Ω–∞ –∑–∞ –¥–µ–Ω—å:</strong> {{ room.price_per_day }} –≥—Ä–Ω</p>

                {% if room.features %}
                    <p><strong>–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:</strong><br>{{ room.features }}</p>
                {% else %}
                    {% if room.type == "auditorium" %}
                        <p><strong>–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:</strong></p>
                        <ul>
                            <li>üì∂ Wi-Fi</li>
                            <li>ü™ë –ó—Ä—É—á–Ω—ñ —Ä–æ–±–æ—á—ñ –º—ñ—Å—Ü—è</li>
                            <li>üí° –ì–∞—Ä–Ω–µ –æ—Å–≤—ñ—Ç–ª–µ–Ω–Ω—è</li>
                            <li>üïò –î–æ—Å—Ç—É–ø –∑ 9:00 –¥–æ 21:00</li>
                        </ul>
                    {% elif room.type == "conference" %}
                        <p><strong>–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:</strong></p>
                        <ul>
                            <li>üìΩ –ü—Ä–æ—î–∫—Ç–æ—Ä —Ç–∞ –µ–∫—Ä–∞–Ω</li>
                            <li>üé§ –ê—É–¥—ñ–æ—Å–∏—Å—Ç–µ–º–∞</li>
                            <li>‚ùÑ –ö–æ–Ω–¥–∏—Ü—ñ–æ–Ω–µ—Ä</li>
                            <li>‚òï –ó–æ–Ω–∞ –¥–ª—è –∫–∞–≤–∏</li>
                        </ul>
                    {% elif room.type == "lab" %}
                        <p><strong>–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:</strong></p>
                        <ul>
                            <li>‚öó –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–µ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è</li>
                            <li>üß™ –ó–∞—Å–æ–±–∏ –±–µ–∑–ø–µ–∫–∏</li>
                            <li>üì∂ Wi-Fi</li>
                        </ul>
                    {% else %}
                        <p><strong>–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:</strong> –ù–µ –≤–∫–∞–∑–∞–Ω—ñ</p>
                    {% endif %}
                {% endif %}
            </div>
        </div>
        {% empty %}
        <p>–ö—ñ–º–Ω–∞—Ç–∏ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω—ñ.</p>
        {% endfor %}
    </div>
</div>

<script>
const toggle = document.getElementById('themeToggle');
const toggleNav = document.getElementById('themeToggleNav');

function applyTheme(isDark) {
    document.body.classList.toggle('dark', isDark);
    toggle.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
    toggleNav.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
}

if (localStorage.getItem('theme') === 'dark') {
    applyTheme(true);
}

toggle.onclick = () => {
    const dark = !document.body.classList.contains('dark');
    applyTheme(dark);
    localStorage.setItem('theme', dark ? 'dark' : 'light');
};

toggleNav.onclick = toggle.onclick;
</script>

</body>
</html>
